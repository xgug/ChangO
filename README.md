# ChangO #
此项目有地面监控中心TiangGongMonitor和月球车YuTu组成，月球车每秒向地球控制中心发送一次自己的当前坐标，方向，速度以及转向角度，地面控制中心每500毫秒在标准输出上输出一次各个
月球车的报告位置、预测位置和方向。

## 项目开发介绍 ##
1.使用scala语言开发，版本2.10，JDK 1.8, 开发IDE IntelliJ IDEA 。

2.月球车运行线路图存在road_map.txt文件里，路线图以纯文本保存，路线图里一行记录代表一条线路，如，0,0,1;36000,0,1;73000,10,1 代表一条线路，每个线路位置状态信息用分号‘;’隔开，
如此线路里有3个坐标点，每个坐标点里数据用逗号隔开，如果第一个位置状态信息，坐标为（0,0)，横坐标为0，纵坐标0，为坐标原点，第3个数字为运行速度，速度为1秒每个单位。

3.项目运行，作为地面监控TianGongMonitor首先启动，读取road_map.txt加载线路图，然后启动月球车YuTu,月球车YuTu启动的时候，会生成自己的一个id,如YuTu882,然后向TianGongMonitor发送求，
TianGongMonitor接受到YuTu的请求后，记录下YuTu的id，并从路线图里取出一条发送给YuTu，YuTu接受到线路图后，开始解析线路图，然后按线路图运行，并每秒向TianGong发送一条自己的状态信息，
状态消息包括当前坐标、速度、转向角，目标坐标、速度、转向角，当YuTu抵达最后一个坐标点时，会向TianGong发送消息End Task!，TiangGong接受到消息后，会向YuTu发送Complete Task! please
exit:YuTu882,YuTu接受到消息后就退出运行。

4.YuTu线路运行算法，YuTu会把收到的线路图解析成一个个坐标状态数组，把整条线路看成是从一个坐标点到下一个坐标的直线运动，走完所有坐标点，就是完成了线路图，例如，YuTu从坐标A(x0,y0)
到坐标B(x1,y1),速度为v(默认为1)，YuTu每秒会向TiangGong报告一次自己的位置状态信息，在t0秒时候，YuTu在坐标A,在向坐标B前进途中t1的坐标为为B1(xx,yy),计算坐标如，x1-x0的平方为X,y1-y0
的平方为Y,A到B的直线距离的平方为L,即L = X + Y,A到B的距离是L的2次开方,即dl,sin@ = (y1-y0)/dl,cos@ = (x1-x0)/dl,(@为运行方向与x轴的夹角),从坐标A点到坐标点B1,从t0到t1,t0为0，
所以用时为t1,所以从A到B1的距离dd = v*t1, 所以xx = dd*cos@,yy = dd * sin@,即B1(dd*cos@, dd * sin@), 当dd > dl的时候，YuTu就到达B坐标点，如果还有下一个C坐标点，那么B坐标点附近
作为B到C的起始坐标，重复如上过程，如果B坐标点为最后一个坐标点，YuTu完成了路线图，将退出。
YuTu躲避障碍物算法，假设YuTu从坐标A(x0,y0)到坐标B(x1,y1)，在B1(xx,yy)遇到障碍物的半径为r,如果障碍物在y上竖线上，那么YuTu将躲避障碍物，从B1到新坐标C0(Xc,Yc)，即C0(x1,y1+2r)
然后在从C0到到达B,如果遇到障碍物在x横线上，同理得到坐标C0(x1+2r,y)。
TiangGong预测YuTu两秒后的位置状态和YuTu路线图算法类似。

